<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ currencyCode }}æ±‡ç‡è¯¦æƒ… - å®æ—¶æ±‡ç‡æ•°æ®æŸ¥è¯¢ | æ±‡ç‡æŸ¥è¯¢ç³»ç»Ÿ</title>
  <meta name="description" :content="currencyCode + 'æ±‡ç‡è¯¦æƒ…é¡µé¢ï¼Œæä¾›' + currencyCode + 'å…‘å…¶ä»–è´§å¸çš„å®æ—¶æ±‡ç‡æ•°æ®ã€å†å²æ±‡ç‡èµ°åŠ¿å›¾è¡¨å’Œæ±‡ç‡è½¬æ¢å·¥å…·ã€‚'">
  <meta name="keywords"
    :content="currencyCode + 'æ±‡ç‡,' + currencyCode + 'å…‘äººæ°‘å¸,' + currencyCode + 'å…‘ç¾å…ƒ,æ±‡ç‡æŸ¥è¯¢,è´§å¸æ±‡ç‡,' + currencyCode + 'æ±‡ç‡èµ°åŠ¿'">
  <meta name="author" content="æ±‡ç‡æŸ¥è¯¢ç³»ç»Ÿ">
  <meta name="robots" content="index, follow">

  <!-- Open Graph Meta Tags -->
  <meta property="og:title" :content="currencyCode + 'æ±‡ç‡è¯¦æƒ… - å®æ—¶æ±‡ç‡æ•°æ®æŸ¥è¯¢'">
  <meta property="og:description" :content="æŸ¥çœ‹' + currencyCode + 'å…‘å…¶ä»–è´§å¸çš„å®æ—¶æ±‡ç‡æ•°æ®å’Œå†å²èµ°åŠ¿å›¾è¡¨">
  <meta property="og:type" content="website">
  <meta property="og:url" :content="'https://yourdomain.com/currencies-rate/' + currencyCode">
  <meta property="og:image" content="/images/og-image.jpg">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">

  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" :content="currencyCode + 'æ±‡ç‡è¯¦æƒ… - å®æ—¶æ±‡ç‡æ•°æ®æŸ¥è¯¢'">
  <meta name="twitter:description" :content="æŸ¥çœ‹' + currencyCode + 'å…‘å…¶ä»–è´§å¸çš„å®æ—¶æ±‡ç‡æ•°æ®å’Œå†å²èµ°åŠ¿">
  <meta name="twitter:image" content="/images/twitter-image.jpg">

  <!-- Canonical URL -->
  <link rel="canonical" :href="'https://yourdomain.com/currencies-rate/' + currencyCode">

  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
  <link rel="icon" type="image/svg+xml" href="/images/favicon.svg">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="manifest" href="/images/site.webmanifest">

  <!-- å¼•å…¥ Vue.js 3 -->
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

  <!-- å¼•å…¥ Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    body {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
    }

    .back-btn {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
    }

    .back-btn:hover {
      transform: translateX(-6px) scale(1.05);
      background: rgba(255, 255, 255, 1);
      box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
    }

    .glass-effect {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.1);
    }

    .loading-spinner {
      border: 3px solid #f3f4f6;
      border-top: 3px solid #3b82f6;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }

    .fade-in {
      animation: fadeIn 0.5s ease-in;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .table-row {
      transition: all 0.2s ease;
    }

    .table-row:hover {
      background: linear-gradient(90deg, #f0f9ff 0%, #e0f2fe 100%);
      transform: scale(1.01);
    }
  </style>
</head>

<body class="min-h-screen p-4 md:p-8">
  <div id="app" class="max-w-6xl mx-auto">
    <!-- é¡¶éƒ¨æ§åˆ¶æ  -->
    <div class="flex justify-between items-center mb-6">
      <!-- è¿”å›æŒ‰é’® -->
      <button @click="goBack"
        class="back-btn flex items-center px-6 py-3 rounded-xl text-blue-600 hover:text-blue-700 font-medium shadow-lg">
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
        </svg>
        â† {{ t('backToCurrencyList') }}
      </button>

      <!-- è¯­è¨€åˆ‡æ¢æŒ‰é’® -->
      <div class="flex items-center space-x-2">
        <button @click="switchLanguage('zh-CN')"
          :class="['px-4 py-2 rounded-lg font-medium transition-all', currentLocale === 'zh-CN' ? 'bg-blue-500 text-white shadow-md' : 'bg-white text-gray-700 hover:bg-gray-50']">
          ä¸­æ–‡
        </button>
        <button @click="switchLanguage('en-US')"
          :class="['px-4 py-2 rounded-lg font-medium transition-all', currentLocale === 'en-US' ? 'bg-blue-500 text-white shadow-md' : 'bg-white text-gray-700 hover:bg-gray-50']">
          English
        </button>
      </div>
    </div>

    <!-- é¢åŒ…å±‘å¯¼èˆª -->
    <nav aria-label="é¢åŒ…å±‘å¯¼èˆª" class="mb-6">
      <ol class="flex items-center space-x-2 text-sm text-white opacity-80">
        <li><a href="/" class="hover:underline">é¦–é¡µ</a></li>
        <li class="flex items-center">
          <svg class="w-4 h-4 mx-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
          </svg>
        </li>
        <li><a href="/" class="hover:underline">è´§å¸åˆ—è¡¨</a></li>
        <li class="flex items-center">
          <svg class="w-4 h-4 mx-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
          </svg>
        </li>
        <li aria-current="page" class="font-medium">{{ currencyCode }}æ±‡ç‡è¯¦æƒ…</li>
      </ol>
    </nav>

    <!-- é¡µé¢æ ‡é¢˜ -->
    <header class="mb-8 text-center fade-in">
      <h1 class="text-4xl font-bold text-white mb-4 drop-shadow-lg">
        ğŸ’± {{ targetCurrency ? currencyCode + ' ' + t('exchangeRateDetails') + ' ' + targetCurrency : currencyCode + ' '
        + t('currencyDetails') }}
      </h1>
      <div class="glass-effect rounded-2xl p-6 max-w-2xl mx-auto">
        <h2 class="text-2xl font-bold text-gray-800">
          {{ targetCurrency ? currencyCode + ' ' + t('exchangeRateHistory') + ' ' + targetCurrency :
          t('showLatestAndHistorical').replace('{currency}', currencyCode) }}
        </h2>
      </div>
    </header>

    <main>
      <!-- æ§åˆ¶åŒºåŸŸ -->
      <div class="glass-effect rounded-2xl p-8 mb-8 fade-in">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
          <!-- ç›®æ ‡è´§å¸é€‰æ‹©å™¨ -->
          <div>
            <label class="block text-lg font-bold text-gray-800 mb-4 flex items-center">
              <svg class="w-5 h-5 mr-2 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
              </svg>
              {{ t('selectTargetCurrency') }}
            </label>
            <div class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8 gap-4">
              <div v-for="currency in availableCurrencies" :key="currency"
                :class="['currency-card p-4 rounded-xl text-center cursor-pointer transform transition-all duration-300', 
                                         targetCurrency === currency ? 'bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-lg scale-105' : 'bg-white text-gray-700 border-gray-200 hover:scale-105']"
                @click="selectTargetCurrency(currency)">
                <div class="font-bold text-lg mb-1">{{ currency }}</div>
                <div class="text-xs opacity-75 font-medium">{{ getCurrencyName(currency) }}</div>
              </div>
            </div>
          </div>

          <!-- å¤©æ•°é€‰æ‹©å™¨ -->
          <div>
            <label class="block text-lg font-bold text-gray-800 mb-4 flex items-center">
              <svg class="w-5 h-5 mr-2 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
              </svg>
              {{ t('viewHistoryDays') }}
            </label>
            <div class="flex flex-wrap gap-3">
              <button v-for="day in [1, 7, 30, 90, 180, 365]" :key="day"
                :class="['px-6 py-3 rounded-xl font-bold transition-all transform hover:scale-105 shadow-md', 
                                            days === day ? 'bg-gradient-to-r from-green-500 to-teal-500 text-white shadow-lg' : 'bg-white text-gray-700 hover:bg-gray-50 border border-gray-200']"
                @click="selectDays(day)">
                {{ day }}{{ t('days') }}
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- ç›®æ ‡è´§å¸æ±‡ç‡æ•°æ® - åªåœ¨æœ‰ç›®æ ‡è´§å¸çš„é¡µé¢æ˜¾ç¤º -->
      <div v-if="targetCurrency" class="mb-8 fade-in">
        <!-- æ±‡ç‡æ•°æ®è¡¨æ ¼ -->
        <div v-if="targetCurrencyRates.length > 0" class="rate-table glass-effect rounded-2xl overflow-hidden">
          <div class="bg-gradient-to-r from-blue-600 to-purple-600 p-8">
            <h2 class="text-3xl font-bold text-white flex items-center">
              <svg class="w-8 h-8 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z">
                </path>
              </svg>
              {{ currencyCode }} {{ t('exchangeRateDetails') }} {{ targetCurrency }} {{ t('exchangeRateData') }}
            </h2>
            <p class="text-blue-100 mt-3 text-lg">ğŸ“Š {{ t('recentTrends') }}</p>
          </div>
          <div class="overflow-x-auto">
            <table class="w-full">
              <thead>
                <tr class="bg-gradient-to-r from-gray-50 to-gray-100">
                  <th
                    class="px-8 py-4 text-left text-sm font-bold text-gray-700 uppercase tracking-wider border-b border-gray-200">
                    ğŸ“… {{ t('date') }}
                  </th>
                  <th
                    class="px-8 py-4 text-left text-sm font-bold text-gray-700 uppercase tracking-wider border-b border-gray-200">
                    ğŸ’° {{ t('baseCurrency') }}
                  </th>
                  <th
                    class="px-8 py-4 text-left text-sm font-bold text-gray-700 uppercase tracking-wider border-b border-gray-200">
                    ğŸ’± {{ t('targetCurrency') }}
                  </th>
                  <th
                    class="px-8 py-4 text-left text-sm font-bold text-gray-700 uppercase tracking-wider border-b border-gray-200">
                    ğŸ“ˆ {{ t('exchangeRate') }}
                  </th>
                </tr>
              </thead>
              <tbody class="divide-y divide-gray-100">
                <tr v-for="(rate, index) in targetCurrencyRates" :key="rate.id"
                  :class="['table-row', index % 2 === 0 ? 'bg-white' : 'bg-gray-50']">
                  <td class="px-8 py-4 whitespace-nowrap text-sm font-semibold text-gray-800">
                    {{ rate.rate_date }}
                  </td>
                  <td class="px-8 py-4 whitespace-nowrap text-sm font-bold text-blue-600">
                    {{ rate.base_currency }}
                  </td>
                  <td class="px-8 py-4 whitespace-nowrap text-sm font-bold text-green-600">
                    {{ rate.target_currency }}
                  </td>
                  <td class="px-8 py-4 whitespace-nowrap">
                    <span
                      class="text-xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent">
                      {{ rate.exchange_rate }}
                    </span>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- åŠ è½½çŠ¶æ€ -->
      <div v-if="loading" class="text-center py-16 fade-in">
        <div class="loading-spinner w-16 h-16 mx-auto mb-6"></div>
        <p class="text-white text-lg font-medium">{{ t('loading') }}</p>
      </div>

      <!-- é”™è¯¯ä¿¡æ¯ -->
      <div v-if="error" class="text-center py-16 glass-effect rounded-2xl p-8 max-w-md mx-auto fade-in">
        <div class="text-red-500 text-8xl mb-6 animate-pulse">âš ï¸</div>
        <p class="text-red-600 font-medium text-lg mb-4">{{ t('error') }}: {{ error }}</p>
        <button @click="targetCurrency ? fetchTargetCurrencyRates() : fetchRateData()"
          class="px-8 py-3 bg-gradient-to-r from-red-500 to-pink-500 text-white rounded-xl hover:from-red-600 hover:to-pink-600 transition-all transform hover:scale-105 shadow-lg">
          é‡æ–°åŠ è½½
        </button>
      </div>

      <!-- æœ€æ–°æ±‡ç‡æ•°æ® -->
      <div v-if="latestRates.length > 0 && !targetCurrency" class="mb-8">
        <h2 class="text-2xl font-bold text-gray-800 mb-4">{{ t('exchangeRateData') }}</h2>

        <!-- æœ€æ–°æ±‡ç‡æ‘˜è¦ - æ˜¾ç¤ºæ‰€æœ‰æ±‡ç‡ -->
        <div class="glass-effect rounded-2xl p-6">
          <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
            <svg class="w-5 h-5 mr-2 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6">
              </path>
            </svg>
            æœ€æ–°æ±‡ç‡æ‘˜è¦
          </h3>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
            <div v-for="rate in latestRates" :key="rate.id"
              class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-4 border border-blue-100">
              <div class="flex justify-between items-center mb-2">
                <span class="text-lg font-bold text-blue-600">{{ rate.base_currency }}</span>
                <span class="text-sm text-gray-500">â†’</span>
                <span class="text-lg font-bold text-green-600">{{ rate.target_currency }}</span>
              </div>
              <div class="text-2xl font-bold text-purple-600 mb-1">{{ rate.exchange_rate }}</div>
              <div class="text-xs text-gray-500">æ›´æ–°æ—¥æœŸ: {{ rate.rate_date }}</div>
            </div>
          </div>
        </div>
      </div>

      <!-- å†å²æ±‡ç‡æ•°æ® -->
      <div v-if="historicalRates && historicalRates.length > 0 && !targetCurrency" class="mb-8">
        <h2 class="text-2xl font-bold text-gray-800 mb-4">{{ t('exchangeRateHistory') }}</h2>
        <div v-for="dayData in historicalRates" :key="dayData.date" class="mb-6">
          <h3 class="text-lg font-semibold text-gray-700 mb-2">{{ t('date') }}: {{ dayData.date }}</h3>
          <div class="overflow-x-auto">
            <table class="min-w-full bg-white rounded-lg shadow overflow-hidden">
              <thead class="bg-gray-50">
                <tr>
                  <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    {{ t('baseCurrency') }}
                  </th>
                  <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    {{ t('targetCurrency') }}
                  </th>
                  <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    {{ t('exchangeRate') }}
                  </th>
                </tr>
              </thead>
              <tbody class="divide-y divide-gray-200">
                <tr v-for="rate in dayData.rates" :key="rate.id">
                  <td class="px-3 py-2 whitespace-nowrap text-sm font-medium text-gray-900">{{ rate.base_currency }}
                  </td>
                  <td class="px-3 py-2 whitespace-nowrap text-sm text-gray-500">{{ rate.target_currency }}</td>
                  <td class="px-3 py-2 whitespace-nowrap text-sm text-gray-500">{{ rate.exchange_rate }}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- APIå“åº”æ•°æ®å±•ç¤ºåŒºåŸŸ -->
      <div v-if="!loading && !error" class="mb-8 fade-in">
        <!-- æœ€æ–°æ±‡ç‡æ—¥æœŸAPIå“åº” -->
        <div v-if="latestRates.length > 0" class="glass-effect rounded-2xl p-6 mb-6">
          <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center">
            <svg class="w-6 h-6 mr-2 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
            </svg>
            /latest-rate-date API å“åº”æ•°æ®
          </h2>
          <div class="bg-gray-50 rounded-lg p-4">
            <pre
              class="text-sm text-gray-700 overflow-x-auto">{{ JSON.stringify({ latestRates: latestRates }, null, 2) }}</pre>
          </div>
        </div>

        <!-- å†å²æ±‡ç‡æ•°æ®APIå“åº” -->
        <div v-if="historicalRates && historicalRates.length > 0" class="glass-effect rounded-2xl p-6">
          <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center">
            <svg class="w-6 h-6 mr-2 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            /historical-rates API å“åº”æ•°æ®
          </h2>
          <div class="bg-gray-50 rounded-lg p-4">
            <pre
              class="text-sm text-gray-700 overflow-x-auto">{{ JSON.stringify({ historicalRates: historicalRates }, null, 2) }}</pre>
          </div>
        </div>
      </div>

      <!-- ç©ºçŠ¶æ€ -->
      <div
        v-if="!loading && !error && latestRates.length === 0 && (!historicalRates || historicalRates.length === 0) && !targetCurrency"
        class="text-center py-12">
        <p class="text-gray-500">{{ t('noData') }}</p>
      </div>
    </main>
  </div>

  <!-- JSON-LDç»“æ„åŒ–æ•°æ® -->
  <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "FinancialService",
        "name": "æ±‡ç‡æŸ¥è¯¢ç³»ç»Ÿ",
        "description": "æä¾›å®æ—¶æ±‡ç‡æ•°æ®æŸ¥è¯¢å’Œè´§å¸è½¬æ¢æœåŠ¡çš„ä¸“ä¸šå¹³å°",
        "url": "https://yourdomain.com",
        "serviceType": "Currency Exchange Rate Service",
        "areaServed": "å…¨çƒ",
        "availableLanguage": ["zh-CN", "en-US"],
        "currenciesSupported": ["USD", "EUR", "GBP", "JPY", "CNY", "CAD", "AUD", "CHF", "HKD", "SGD", "KRW", "INR", "BRL", "RUB", "MXN", "IDR", "TRY", "SAR", "AED", "THB", "MYR", "PHP", "VND", "ZAR", "NZD"]
    }
    </script>

  <script>
    const { createApp } = Vue;

    createApp({
      data() {
        return {
          currencyCode: '',
          latestRates: [],
          historicalRates: [],
          loading: false,
          error: null,
          targetCurrency: null,
          targetCurrencyRates: [],
          days: 7,
          availableCurrencies: ['USD', 'EUR', 'GBP', 'JPY', 'CNY', 'CAD', 'AUD', 'CHF', 'HKD', 'SGD', 'KRW', 'INR', 'BRL', 'RUB', 'MXN', 'IDR', 'TRY', 'SAR', 'AED', 'THB', 'MYR', 'PHP', 'VND', 'ZAR', 'NZD'],
          currentLocale: 'zh-CN',
          translations: {
            'zh-CN': {
              'backToCurrencyList': 'è¿”å›è´§å¸åˆ—è¡¨',
              'exchangeRateDetails': 'æ±‡ç‡è¯¦æƒ…',
              'currencyDetails': 'è´§å¸è¯¦æƒ…',
              'exchangeRateHistory': 'æ±‡ç‡å†å²',
              'showLatestAndHistorical': '{currency}çš„æœ€æ–°å’Œå†å²æ±‡ç‡æ•°æ®',
              'selectTargetCurrency': 'é€‰æ‹©ç›®æ ‡è´§å¸',
              'viewHistoryDays': 'æŸ¥çœ‹å†å²å¤©æ•°',
              'days': 'å¤©',
              'exchangeRateData': 'æ±‡ç‡æ•°æ®',
              'recentTrends': 'è¿‘æœŸè¶‹åŠ¿',
              'date': 'æ—¥æœŸ',
              'baseCurrency': 'åŸºç¡€è´§å¸',
              'targetCurrency': 'ç›®æ ‡è´§å¸',
              'exchangeRate': 'æ±‡ç‡',
              'loading': 'åŠ è½½ä¸­...',
              'error': 'é”™è¯¯',
              'noData': 'æš‚æ— æ•°æ®'
            },
            'en-US': {
              'backToCurrencyList': 'Back to Currency List',
              'exchangeRateDetails': 'Exchange Rate Details',
              'currencyDetails': 'Currency Details',
              'exchangeRateHistory': 'Exchange Rate History',
              'showLatestAndHistorical': 'Show latest and historical exchange rates for {currency}',
              'selectTargetCurrency': 'Select Target Currency',
              'viewHistoryDays': 'View History Days',
              'days': 'Days',
              'exchangeRateData': 'Exchange Rate Data',
              'recentTrends': 'Recent Trends',
              'date': 'Date',
              'baseCurrency': 'Base Currency',
              'targetCurrency': 'Target Currency',
              'exchangeRate': 'Exchange Rate',
              'loading': 'Loading...',
              'error': 'Error',
              'noData': 'No data available'
            }
          }
        }
      },

      computed: {
        t() {
          return (key) => {
            return this.translations[this.currentLocale]?.[key] || key;
          }
        }
      },

      methods: {
        goBack() {
          window.history.back();
        },

        switchLanguage(locale) {
          this.currentLocale = locale;
        },

        selectTargetCurrency(currency) {
          // è·³è½¬åˆ°å­é¡µé¢ï¼š/currencies-rate/{base_currency}/{target_currency}
          const urlParams = new URLSearchParams(window.location.search);
          const baseCurrency = urlParams.get('base_currency') || this.currencyCode;

          // æ„å»ºå­é¡µé¢URLï¼ŒåŒ…å«å½“å‰é€‰æ‹©çš„å¤©æ•°å‚æ•°
          const subPageUrl = `/currencies-rate/${baseCurrency}/${currency}?days=${this.days}`;
          window.location.href = subPageUrl;
        },

        selectDays(days) {
          this.days = days;
          if (this.targetCurrency) {
            this.fetchTargetCurrencyRates();
          } else {
            this.fetchRateData();
          }
        },

        getCurrencyName(currency) {
          const currencyNames = {
            'USD': 'ç¾å…ƒ',
            'EUR': 'æ¬§å…ƒ',
            'GBP': 'è‹±é•‘',
            'JPY': 'æ—¥å…ƒ',
            'CNY': 'äººæ°‘å¸',
            'CAD': 'åŠ å…ƒ',
            'AUD': 'æ¾³å…ƒ',
            'CHF': 'ç‘å£«æ³•éƒ',
            'HKD': 'æ¸¯å¸',
            'SGD': 'æ–°åŠ å¡å…ƒ',
            'KRW': 'éŸ©å…ƒ',
            'INR': 'å°åº¦å¢æ¯”',
            'BRL': 'å·´è¥¿é›·äºšå°”',
            'RUB': 'ä¿„ç½—æ–¯å¢å¸ƒ',
            'MXN': 'å¢¨è¥¿å“¥æ¯”ç´¢',
            'IDR': 'å°å°¼ç›¾',
            'TRY': 'åœŸè€³å…¶é‡Œæ‹‰',
            'SAR': 'æ²™ç‰¹é‡Œäºšå°”',
            'AED': 'é˜¿è”é…‹è¿ªæ‹‰å§†',
            'THB': 'æ³°é“¢',
            'MYR': 'é©¬æ¥è¥¿äºšæ—å‰ç‰¹',
            'PHP': 'è²å¾‹å®¾æ¯”ç´¢',
            'VND': 'è¶Šå—ç›¾',
            'ZAR': 'å—éå…°ç‰¹',
            'NZD': 'æ–°è¥¿å…°å…ƒ'
          };
          return currencyNames[currency] || currency;
        },

        async fetchTargetCurrencyRates() {
          if (!this.targetCurrency) return;

          this.loading = true;
          this.error = null;

          try {
            // ä»URLå‚æ•°ä¸­è·å–åŸºç¡€è´§å¸
            const urlParams = new URLSearchParams(window.location.search);
            const baseCurrency = urlParams.get('base_currency') || this.currencyCode;

            const response = await fetch(`/api/rates/${baseCurrency}/${this.targetCurrency}?days=${this.days}`);
            if (!response.ok) {
              throw new Error('è·å–æ±‡ç‡æ•°æ®å¤±è´¥');
            }

            const data = await response.json();
            this.targetCurrencyRates = data.rates || [];
          } catch (err) {
            this.error = err.message;
            console.error('Error fetching target currency rates:', err);
          } finally {
            this.loading = false;
          }
        },

        async fetchRateData() {
          this.loading = true;
          this.error = null;

          try {
            // ä»URLå‚æ•°ä¸­è·å–åŸºç¡€è´§å¸
            const urlParams = new URLSearchParams(window.location.search);
            const baseCurrency = urlParams.get('base_currency') || this.currencyCode;

            // è°ƒç”¨ /latest-rate-date APIï¼Œä½¿ç”¨åŸºç¡€è´§å¸
            const latestDateResponse = await fetch(`/latest-rate-date?currency=${baseCurrency}`);
            if (!latestDateResponse.ok) {
              throw new Error('è·å–æœ€æ–°æ±‡ç‡æ—¥æœŸå¤±è´¥');
            }
            const latestDateData = await latestDateResponse.json();
            this.latestRates = latestDateData.latestRates || [];

            // è°ƒç”¨ /historical-rates APIï¼Œä½¿ç”¨åŸºç¡€è´§å¸
            const historicalResponse = await fetch(`/historical-rates?currency=${baseCurrency}`);
            if (!historicalResponse.ok) {
              throw new Error('è·å–å†å²æ±‡ç‡æ•°æ®å¤±è´¥');
            }
            const historicalData = await historicalResponse.json();
            this.historicalRates = historicalData.historicalRates || [];
          } catch (err) {
            this.error = err.message;
            console.error('Error fetching rate data:', err);
          } finally {
            this.loading = false;
          }
        },

        initCurrencyCode() {
          // ä»URLè·¯å¾„ä¸­è·å–è´§å¸ä»£ç 
          const pathParts = window.location.pathname.split('/');
          this.currencyCode = pathParts[pathParts.length - 1] || 'USD';

          // ä»URLå‚æ•°ä¸­è·å–åŸºç¡€è´§å¸ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
          const urlParams = new URLSearchParams(window.location.search);
          const baseCurrency = urlParams.get('base_currency');

          if (this.currencyCode) {
            this.fetchRateData();
          }
        }
      },

      mounted() {
        this.initCurrencyCode();
      }
    }).mount('#app');
  </script>
</body>

</html>